[gcode_macro QUAD_GANTRY_LEVEL]
rename_existing: BASE_QUAD_GANTRY_LEVEL
gcode:
     {% if printer.toolhead.homed_axes == "xyz" %}
        M118 Printer is already homed
    {% else %}
        M118 Printer needs homed...
        G28
    {% endif %}
    
    BASE_QUAD_GANTRY_LEVEL

[gcode_macro QUAD_GANTRY_LEVEL_PROXIMITY]
gcode:
    QUAD_GANTRY_LEVEL PROBE_METHOD=PROXIMITY